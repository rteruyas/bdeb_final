schema: '2.0'
stages:
  preprocess:
    cmd: python src/preprocessing.py
    deps:
    - path: config/preprocessing.yaml
      hash: md5
      md5: 21bc2772406eb12f52a9df5102744815
      size: 648
    - path: data/raw_data.csv
      hash: md5
      md5: 99fefda211848d72a323dd7ea02bfc97
      size: 518150
    - path: src/preprocessing.py
      hash: md5
      md5: a32e2459dbb24cb52e684f03b2cb7589
      size: 13335
    - path: src/utils/path_utils.py
      hash: md5
      md5: ec0ca1b45bb14fa2222167b33a7ddeaa
      size: 975
    params:
      config/preprocessing.yaml:
        preprocessing.correlation_threshold: 0.85
        preprocessing.drop_columns:
        - udi
        - product_id
        - twf
        - hdf
        - pwf
        - osf
        - rnf
        preprocessing.encode_categorical_drop_first: true
        preprocessing.missing_values_strategy: drop
        preprocessing.target_column: machine_failure
    outs:
    - path: data/processed_data.csv
      hash: md5
      md5: 19af85c8f79a5e2b983fdbdddc366f95
      size: 828356
  split:
    cmd: python src/split_train_test.py
    deps:
    - path: config/split_train_test.yaml
      hash: md5
      md5: 08c91e49444b8a11aa52eb6bc12a113e
      size: 489
    - path: data/processed_data.csv
      hash: md5
      md5: 19af85c8f79a5e2b983fdbdddc366f95
      size: 828356
    - path: src/split_train_test.py
      hash: md5
      md5: c0a24a6ca923972db9348fe3e4e80210
      size: 6096
    - path: src/utils/path_utils.py
      hash: md5
      md5: ec0ca1b45bb14fa2222167b33a7ddeaa
      size: 975
    params:
      config/split_train_test.yaml:
        split_train_test.random_state: 42
        split_train_test.stratify: false
        split_train_test.target_column: target
        split_train_test.test_size: 0.2
    outs:
    - path: data/test_data.csv
      hash: md5
      md5: eec9efa43296a83bb069041034684a63
      size: 163993
    - path: data/train_data.csv
      hash: md5
      md5: 14ea1110fb681c1523fead6980276961
      size: 655753
  train:
    cmd: python src/train_model.py
    deps:
    - path: config/general.yaml
      hash: md5
      md5: cd50054053306b6a100cb250f326b3ac
      size: 91
    - path: config/train_model.yaml
      hash: md5
      md5: 16df9d2a69d498de03324d0fa62921eb
      size: 2778
    - path: data/test_data.csv
      hash: md5
      md5: eec9efa43296a83bb069041034684a63
      size: 163993
    - path: data/train_data.csv
      hash: md5
      md5: 14ea1110fb681c1523fead6980276961
      size: 655753
    - path: src/train_model.py
      hash: md5
      md5: 051b76394fe75c7a67de4f42d6914c04
      size: 18802
    - path: src/utils/path_utils.py
      hash: md5
      md5: ec0ca1b45bb14fa2222167b33a7ddeaa
      size: 975
    params:
      config/general.yaml:
        dagshub_repo_owner: rteruyas
        dagshub_uri: bdeb_final
      config/train_model.yaml:
        train_model.decision_tree.enabled: false
        train_model.decision_tree.param_grid:
          criterion:
          - gini
          - entropy
          max_depth:
          - 3
          - 5
          min_samples_split:
          - 2
          - 5
          min_samples_leaf:
          - 1
          random_state:
          - 42
        train_model.logistic_regression.enabled: true
        train_model.logistic_regression.param_grid:
          penalty:
          - l1
          - l2
          - elasticnet
          l1_ratio:
          - 0.5
          C:
          - 100
          solver:
          - saga
          - lbfgs
          max_iter:
          - 100
          random_state:
          - 42
        train_model.random_forest.enabled: false
        train_model.random_forest.param_grid:
          n_estimators:
          - 50
          criterion:
          - gini
          - entropy
          max_depth:
          - 3
          - 10
          min_samples_split:
          - 2
          - 5
          - 10
          min_samples_leaf:
          - 4
          max_features:
          - sqrt
          - log2
          random_state:
          - 42
        train_model.target_column: target
    outs:
    - path: metrics/model_metrics.json
      hash: md5
      md5: 5bc14880f093023b6a194a5c9b50a398
      size: 365
    - path: metrics/training_status.json
      hash: md5
      md5: 597a6570a5a1f57d30389ef3500b463a
      size: 247
    - path: models/
      hash: md5
      md5: 6e355c8c9b99c408a7a0711f5a337b40.dir
      size: 843266
      nfiles: 3
